From f23833502b43a60794ed79d9c3f461cead436ad7 Mon Sep 17 00:00:00 2001
From: Gabriel Arazas <foo.dogsquared@gmail.com>
Date: Mon, 26 Oct 2020 05:05:26 +0800
Subject: [PATCH] Change for patch

---
 wikiman.sh | 35 ++---------------------------------
 1 file changed, 2 insertions(+), 33 deletions(-)

diff --git a/wikiman.sh b/wikiman.sh
index 5346063..6c42d94 100755
--- a/wikiman.sh
+++ b/wikiman.sh
@@ -41,47 +41,16 @@ fi
 
 init() {
 
-	# BSD compatibility: Installation prefix
-
-	case "$(dirname "$0")" in
-		"$HOME/bin"|"$HOME/.local/bin")
-			conf_sys_usr="$HOME/.local/share";
-			conf_sys_etc="${XDG_CONFIG_HOME:-"$HOME/.config"}/wikiman";;
-		'/bin'|'/sbin'|'/usr/bin'|'/usr/sbin')
-			conf_sys_usr='/usr';
-			conf_sys_etc='/etc';;
-		'/usr/local/bin'|'/usr/local/sbin')
-			conf_sys_usr='/usr/local';
-			conf_sys_etc='/usr/local/etc';;
-		*)
-			case "$(dirname "$(command -v wikiman)")" in
-				"$HOME/bin"|"$HOME/.local/bin")
-					echo 'warning: unsupported installation path, using fallback for user install' 1>&2;
-					conf_sys_usr="$HOME/.local/share";
-					conf_sys_etc="${XDG_CONFIG_HOME:-"$HOME/.config"}/wikiman";;
-				'/bin'|'/sbin'|'/usr/bin'|'/usr/sbin')
-					echo 'warning: unsupported installation path, using fallback for Linux' 1>&2;
-					conf_sys_usr='/usr';
-					conf_sys_etc='/etc';;
-				'/usr/local/bin'|'/usr/local/sbin')
-					echo 'warning: unsupported installation path, using fallback for BSD' 1>&2;
-					conf_sys_usr='/usr/local';
-					conf_sys_etc='/usr/local/etc';;
-				*)
-					echo 'error: unsupported installation path - failed to establish fallback' 1>&2;
-					exit 5;;
-			esac;;
-	esac
+    conf_sys_usr='@INSTALL_DIR@';
 
 	export conf_sys_usr
-	export conf_sys_etc
 
 	# Configuration variables
 
 	conf_version='2.12.1'
 
 	config_dir="${XDG_CONFIG_HOME:-"$HOME/.config"}/wikiman"
-	config_file="$conf_sys_etc/wikiman.conf"
+	config_file="$conf_sys_usr/share/wikiman/wikiman.conf"
 	config_file_usr="$config_dir/wikiman.conf"
 
 	[ -f "$config_file" ] && [ -r "$config_file" ] || \
-- 
2.28.0

